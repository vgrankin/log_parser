CREATE DATABASE IF NOT EXISTS `ef` DEFAULT CHARACTER SET utf8 COLLATE utf8_bin;
USE `ef`;

CREATE TABLE  `ef`.`ip_activity_logs` (
  `id` INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  `date` DATETIME(3) NOT NULL,
  `ip` VARBINARY(16) NOT NULL,
  `request` VARCHAR(50) NOT NULL,
  `status` SMALLINT(3) UNSIGNED NOT NULL,
  `user_agent` TEXT
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

ALTER TABLE `ef`.`ip_activity_logs` ADD INDEX (`ip`, `date`);

CREATE TABLE  `ef`.`blocked_ips` (
  `id` INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,  
  `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  `ip` VARBINARY(16) NOT NULL,  
  `reason` TEXT
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

ALTER TABLE `ef`.`blocked_ips` ADD INDEX (`ip`);